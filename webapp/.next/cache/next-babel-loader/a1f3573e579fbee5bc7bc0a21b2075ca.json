{"ast":null,"code":"var _jsxFileName = \"/Users/rsbear/dev/dockertest/webapp/components/login.tsx\";\nvar __jsx = React.createElement;\nimport React, { useState } from \"react\";\nimport useForm from \"../hooks/useForm\";\nimport { Wrapper, FlexForm, Input } from \"../styles/main\";\nimport { useCreateLoginAuthMutation } from \"../generated/graphql\";\nconst initialValues = {\n  email: \"\",\n  magicword: \"\"\n};\n\nconst Login = () => {\n  const [values, handleChange] = useForm(initialValues);\n  const {\n    0: tokenSent,\n    1: setTokenSent\n  } = useState(false);\n  const [createLoginAuth] = useCreateLoginAuthMutation();\n\n  async function handleGenerateAuth(values) {\n    event.preventDefault();\n\n    try {\n      const res = await createLoginAuth({\n        variables: {\n          email: values.email\n        }\n      });\n      console.log(res);\n      setTokenSent(true);\n    } catch (err) {//fail gracefully\n    }\n  }\n\n  function handleLogin(values) {\n    console.log(\"login\");\n  }\n\n  return __jsx(Wrapper, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 36\n    },\n    __self: this\n  }, __jsx(\"h3\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 37\n    },\n    __self: this\n  }, \" Login\"), !tokenSent ? __jsx(FlexForm, {\n    onSubmit: () => handleGenerateAuth(values),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 39\n    },\n    __self: this\n  }, __jsx(Input, {\n    type: \"text\",\n    placeholder: \"email\",\n    name: \"email\",\n    value: values.email,\n    onChange: handleChange,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 40\n    },\n    __self: this\n  }), __jsx(\"button\", {\n    type: \"submit\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47\n    },\n    __self: this\n  }, \"Get Token\")) : __jsx(FlexForm, {\n    onSubmit: () => handleLogin(values),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50\n    },\n    __self: this\n  }, __jsx(Input, {\n    type: \"text\",\n    placeholder: \"magic word\",\n    name: \"username\",\n    value: values.magicword,\n    onChange: handleChange,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51\n    },\n    __self: this\n  }), __jsx(\"button\", {\n    type: \"submit\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58\n    },\n    __self: this\n  }, \"log in\")));\n};\n\nexport default Login;","map":{"version":3,"sources":["/Users/rsbear/dev/dockertest/webapp/components/login.tsx"],"names":["React","useState","useForm","Wrapper","FlexForm","Input","useCreateLoginAuthMutation","initialValues","email","magicword","Login","values","handleChange","tokenSent","setTokenSent","createLoginAuth","handleGenerateAuth","event","preventDefault","res","variables","console","log","err","handleLogin"],"mappings":";;AAAA,OAAOA,KAAP,IAAoBC,QAApB,QAAoC,OAApC;AACA,OAAOC,OAAP,MAAoB,kBAApB;AACA,SAASC,OAAT,EAAkBC,QAAlB,EAA4BC,KAA5B,QAAyC,gBAAzC;AACA,SAASC,0BAAT,QAA2C,sBAA3C;AAEA,MAAMC,aAAa,GAAG;AACpBC,EAAAA,KAAK,EAAE,EADa;AAEpBC,EAAAA,SAAS,EAAE;AAFS,CAAtB;;AAKA,MAAMC,KAAc,GAAG,MAAM;AAC3B,QAAM,CAACC,MAAD,EAASC,YAAT,IAAyBV,OAAO,CAACK,aAAD,CAAtC;AACA,QAAM;AAAA,OAACM,SAAD;AAAA,OAAYC;AAAZ,MAA4Bb,QAAQ,CAAC,KAAD,CAA1C;AACA,QAAM,CAACc,eAAD,IAAoBT,0BAA0B,EAApD;;AAEA,iBAAeU,kBAAf,CAAkCL,MAAlC,EAA0C;AACxCM,IAAAA,KAAK,CAACC,cAAN;;AACA,QAAI;AACF,YAAMC,GAAG,GAAG,MAAMJ,eAAe,CAAC;AAChCK,QAAAA,SAAS,EAAE;AACTZ,UAAAA,KAAK,EAAEG,MAAM,CAACH;AADL;AADqB,OAAD,CAAjC;AAKAa,MAAAA,OAAO,CAACC,GAAR,CAAYH,GAAZ;AACAL,MAAAA,YAAY,CAAC,IAAD,CAAZ;AACD,KARD,CAQE,OAAOS,GAAP,EAAY,CACZ;AACD;AACF;;AAED,WAASC,WAAT,CAAqBb,MAArB,EAA6B;AAC3BU,IAAAA,OAAO,CAACC,GAAR,CAAY,OAAZ;AACD;;AAED,SACE,MAAC,OAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cADF,EAEG,CAACT,SAAD,GACC,MAAC,QAAD;AAAU,IAAA,QAAQ,EAAE,MAAMG,kBAAkB,CAACL,MAAD,CAA5C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,KAAD;AACE,IAAA,IAAI,EAAC,MADP;AAEE,IAAA,WAAW,EAAC,OAFd;AAGE,IAAA,IAAI,EAAC,OAHP;AAIE,IAAA,KAAK,EAAEA,MAAM,CAACH,KAJhB;AAKE,IAAA,QAAQ,EAAEI,YALZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,EAQE;AAAQ,IAAA,IAAI,EAAC,QAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBARF,CADD,GAYC,MAAC,QAAD;AAAU,IAAA,QAAQ,EAAE,MAAMY,WAAW,CAACb,MAAD,CAArC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,KAAD;AACE,IAAA,IAAI,EAAC,MADP;AAEE,IAAA,WAAW,EAAC,YAFd;AAGE,IAAA,IAAI,EAAC,UAHP;AAIE,IAAA,KAAK,EAAEA,MAAM,CAACF,SAJhB;AAKE,IAAA,QAAQ,EAAEG,YALZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,EAQE;AAAQ,IAAA,IAAI,EAAC,QAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cARF,CAdJ,CADF;AA4BD,CApDD;;AAsDA,eAAeF,KAAf","sourcesContent":["import React, { FC, useState } from \"react\";\nimport useForm from \"../hooks/useForm\";\nimport { Wrapper, FlexForm, Input } from \"../styles/main\";\nimport { useCreateLoginAuthMutation } from \"../generated/graphql\";\n\nconst initialValues = {\n  email: \"\",\n  magicword: \"\"\n};\n\nconst Login: FC<any> = () => {\n  const [values, handleChange] = useForm(initialValues);\n  const [tokenSent, setTokenSent] = useState(false);\n  const [createLoginAuth] = useCreateLoginAuthMutation();\n\n  async function handleGenerateAuth(values) {\n    event.preventDefault();\n    try {\n      const res = await createLoginAuth({\n        variables: {\n          email: values.email\n        }\n      });\n      console.log(res);\n      setTokenSent(true);\n    } catch (err) {\n      //fail gracefully\n    }\n  }\n\n  function handleLogin(values) {\n    console.log(\"login\");\n  }\n\n  return (\n    <Wrapper>\n      <h3> Login</h3>\n      {!tokenSent ? (\n        <FlexForm onSubmit={() => handleGenerateAuth(values)}>\n          <Input\n            type=\"text\"\n            placeholder=\"email\"\n            name=\"email\"\n            value={values.email}\n            onChange={handleChange}\n          />\n          <button type=\"submit\">Get Token</button>\n        </FlexForm>\n      ) : (\n        <FlexForm onSubmit={() => handleLogin(values)}>\n          <Input\n            type=\"text\"\n            placeholder=\"magic word\"\n            name=\"username\"\n            value={values.magicword}\n            onChange={handleChange}\n          />\n          <button type=\"submit\">log in</button>\n        </FlexForm>\n      )}\n    </Wrapper>\n  );\n};\n\nexport default Login;\n"]},"metadata":{},"sourceType":"module"}