{"version":3,"file":"static/webpack/static/development/pages/index.js.dfe0322bc8e81b17427c.hot-update.js","sources":["webpack:///./components/login.tsx"],"sourcesContent":["import React, { FC, useState } from \"react\";\nimport useForm from \"../hooks/useForm\";\nimport { Wrapper, FlexForm, Input } from \"../styles/main\";\nimport {\n  useCreateLoginAuthMutation,\n  useLoginMutation\n} from \"../generated/graphql\";\n\nconst initialValues = {\n  email: \"\",\n  secret: \"\"\n};\n\nconst Login: FC<any> = () => {\n  const [values, handleChange] = useForm(initialValues);\n  const [tokenSent, setTokenSent] = useState(false);\n  const [createLoginAuth] = useCreateLoginAuthMutation();\n  const [login] = useLoginMutation();\n\n  async function handleGenerateAuth(values) {\n    event.preventDefault();\n    try {\n      const res = await createLoginAuth({\n        variables: {\n          email: values.email\n        }\n      });\n      console.log(res);\n      setTokenSent(true);\n    } catch (err) {\n      //fail gracefully\n    }\n  }\n\n  async function handleLogin(values) {\n    event.preventDefault();\n    console.log(` values ${values}`);\n    try {\n      const res = await login({\n        variables: {\n          secret: values.secret,\n          email: \"client@client.com\"\n        }\n      });\n      console.log(res);\n    } catch (err) {\n      // fail smooth\n    }\n  }\n\n  return (\n    <Wrapper>\n      <h3> Login</h3>\n      {tokenSent ? (\n        <FlexForm onSubmit={() => handleGenerateAuth(values)}>\n          <Input\n            type=\"text\"\n            placeholder=\"email\"\n            name=\"email\"\n            value={values.email}\n            onChange={handleChange}\n          />\n          <button type=\"submit\">Get Token</button>\n        </FlexForm>\n      ) : (\n        <FlexForm onSubmit={() => handleLogin(values)}>\n          <Input\n            type=\"text\"\n            placeholder=\"magic word\"\n            name=\"secret\"\n            value={values.secret}\n            onChange={handleChange}\n          />\n          <button type=\"submit\">log in</button>\n        </FlexForm>\n      )}\n    </Wrapper>\n  );\n};\n\nexport default Login;\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AAKA;AACA;AACA;AAFA;AACA;AAIA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AACA;AAKA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAIA;AACA;AADA;AADA;AACA;AAJA;AAGA;AAKA;AACA;AATA;AAAA;AACA;AADA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAcA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAFA;AAAA;AAAA;AAKA;AACA;AACA;AAFA;AADA;AACA;AALA;AAIA;AAMA;AAVA;AAAA;AACA;AADA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAeA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AACA;AACA;AALA;AAAA;AAAA;AAAA;AAAA;AAAA;AAOA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AACA;AACA;AALA;AAAA;AAAA;AAAA;AAAA;AAAA;AAOA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAKA;AACA;AACA;;;;A","sourceRoot":""}